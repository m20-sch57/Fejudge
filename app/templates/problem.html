{% extends "base.html" %}

{% block content %}
<div class="page">
    <div id="content">
        <div class="bg-white" id="statementsBox">
            <div id="statementsTitle">
                <div id="problemActions">
                    <a href="/contests" class="btn-flat btn-transparent" id="goBack">
                        <span class="fa fa-arrow-left"></span>
                    </a>
                    <button class="btn-flat btn-transparent" id="reloadStatements">
                        <span class="fa fa-redo"></span>
                    </button>
                </div>
                <div id="problemInfo">
                    <div id="problemId" style="display: none;">
                        {{ problem.id }}
                    </div>
                    <div id="problemName">
                        Task {{ problem.number }}: {{ problem_manager.problem_name(language) }}
                    </div>
                    <div id="problemLanguage">
                        <select class="select select-small bd-lightgrey" id="problemLanguageSelect">
                            {% for statements_language in problem_manager.statements_languages %}
                            <option value="{{ statements_language }}"></option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <div id="statementsContent">
                <div id="statementsContentScrollable">
                    <div id="statementsHeader">
                        <div id="timeLimit">
                            <span class="fa fa-clock"></span>
                            {{ (problem_manager.time_limit_ms / 1000) | round(2) }} second(s)
                        </div>
                        <div id="memoryLimit">
                            <span class="fa fa-microchip"></span>
                            {{ problem_manager.memory_limit_kb // 1024 }} MiB
                        </div>
                        <div id="inputOutput">
                            stdin &rarr; stdout
                        </div>
                    </div>
                    <div id="statementsLoadedContent">
                    </div>
                    <script type="text/x-mathjax-config">
                        MathJax.Hub.Config({
                            messageStyle: "none"
                        });
                        MathJax.Hub.Queue(function () {
                            document.getElementById("statementsLoading").style.display = "none";
                        });
                    </script>
                </div>
                <div class="bg-white" id="statementsLoading">
                    <div id="statementsLoadingLabel">
                        <div class="lds-ring">
                            <div></div><div></div><div></div><div></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-white collapsed" id="extraBox">
            <button class="btn-flat btn-white" id="extraBoxCollapse">
                <span class="fa fa-arrow-right"></span>
            </button>
            <div class="extra-box" id="submitBox" style="display: none;">
                <div class="extra-title bg-green" id="submitTitle">
                    <div id="submitText">
                        Submit a solution
                    </div>
                </div>
                <div class="extra-content">
                    <div id="submitForm">
                        <div id="taskRow">
                            <div id="taskLabel">
                                Select task:
                            </div>
                            <select class="select select-small bd-lightgrey" id="taskSelect">
                                {% for another_problem in contest.problems %}
                                <option value="{{ another_problem.number }}">
                                    Task {{ another_problem.number }}: {{ another_problem.get_name(language) }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        <div id="languageRow">
                            <div id="languageLabel">
                                Select language:
                            </div>
                            <select class="select select-small bd-lightgrey" id="languageSelect">
                                {% for program_language in problem_manager.program_languages %}
                                <option value="{{ program_language }}"></option>
                                {% endfor %}
                            </select>
                        </div>
                        <div id="chooseFileRow">
                            <div id="chooseFileLabel">
                                Choose file:
                            </div>
                            <input type="file" id="chooseFileInput" style="display: none;">
                            <label for="chooseFileInput" class="btn btn-blue" id="chooseFileButton">
                                Choose file
                            </label>
                            <div id="chooseFileName">
                            </div>
                        </div>
                        <div id="submitFileRow">
                            <div id="submitFileLabel">
                                Submit:
                            </div>
                            <button class="btn btn-green" id="submitFileButton">
                                Submit it!
                            </button>
                            <div id="submitLoading" style="display: none;">
                                <div class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
                            </div>
                            <div class="col-green" id="submitSuccess" style="display: none;">
                                <span class="fa fa-check"></span>
                                Submitted
                            </div>
                            <div class="col-red" id="submitFail" style="display: none;">
                            </div>
                        </div>
                    </div>
                    <div id="submissions">
                        <div id="submissionsLoading">
                            <div id="submissionsLoadingLabel">
                                <div class="lds-ring">
                                    <div></div><div></div><div></div><div></div>
                                </div>
                            </div>
                        </div>
                        <div id="submissionsNone" style="display: none;">
                            No submissions yet.
                        </div>
                        <table id="submissionsTable" style="display: none;">
                        <thead>
                            <th class="id">ID</th>
                            <th class="language">Language</th>
                            <th class="status">Status</th>
                            <th class="score">Score</th>
                            <th class="details">Details</th>
                        </thead>
                        <tbody>
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="extra-box" id="submissionDetailsBox" style="display: none;">
                <div class="extra-title bg-whitesmoke" id="submissionDetailsTitle">
                    <div id="submissionDetailsTitleMain">
                        <div id="submissionDetailsLabel">
                            Submission #<span id="submissionDetailsId"></span>
                        </div>
                        <div id="submissionDetailsNavigation">
                            <button class="btn-nav" id="submissionProtocolNavButton">
                                Protocol
                            </button>
                            <button class="btn-nav" id="submissionCodeNavButton">
                                Code
                            </button>
                            <button class="btn-nav" id="submissionInfoNavButton">
                                Info
                            </button>
                        </div>
                    </div>
                    <button class="btn-flat btn-transparent" id="submissionDetailsClose">
                        <span class="fa fa-times"></span>
                    </button>
                </div>
                <div class="extra-content">
                    <div id="submissionProtocol">
                        <div id="submissionResult">
                            <div id="submissionResultStatus">
                            </div>
                            <div class="col-grey" id="submissionResultTestsPassed">
                            </div>
                        </div>
                        <div id="submissionCompilation">
                            <pre><code id="submissionCompilationLog"></code></pre>
                        </div>
                        <div id="submissionEvaluation">
                            <table id="submissionEvaluationTable">
                            <thead>
                                <th>#</th>
                                <th>Status</th>
                                <th>Time (s)</th>
                                <th>Memory (KB)</th>
                                <th>Group</th>
                                <th>Score</th>
                            </thead>
                            <tbody>
                            </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="submissionCode">
                        <pre><code id="submissionSource"></code></pre>
                        <div id="submissionCodeBottom">
                            <button class="btn-flat btn-green" id="submissionCodeCopy">
                                <span class="fa fa-clipboard"></span>
                            </button>
                            <div class="bg-green" id="submissionCodeCopyHint" style="display: none;">
                                Copied!
                            </div>
                        </div>
                    </div>
                    <div id="submissionInfo">
                        <table id="submissionInfoTable">
                        <tbody>
                            <tr>
                                <td>Sender</td>
                                <td id="submissionInfoUser"></td>
                            </tr>
                            <tr>
                                <td>Contest</td>
                                <td id="submissionInfoContest"></td>
                            </tr>
                            <tr>
                                <td>Problem number</td>
                                <td id="submissionInfoProblem"></td>
                            </tr>
                            <tr>
                                <td>Programming language</td>
                                <td id="submissionInfoLanguage"></td>
                            </tr>
                            <tr>
                                <td>Submit time</td>
                                <td id="submissionInfoTime"></td>
                            </tr>
                            <tr>
                                <td>Result of checking</td>
                                <td id="submissionInfoStatus"></td>
                            </tr>
                            <tr>
                                <td>Points scored</td>
                                <td id="submissionInfoScore"></td>
                            </tr>
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="extra-box" id="contestInfoBox" style="display: none;">
                <div class="extra-title bg-blue" id="contestInfoTitle">
                    <div id="contestInfoText">
                        Contest information
                    </div>
                </div>
                <div class="extra-content">
                </div>
            </div>
            <div class="extra-box" id="contestMessagesBox" style="display: none;">
                <div class="extra-title bg-yellow" id="contestMessagesTitle">
                    <div id="contestMessagesText">
                        Contest messages
                    </div>
                </div>
                <div class="extra-content">
                </div>
            </div>
        </div>
        <div class="bg-white" id="rightBox">
            <div id="submitSection">
                <button class="btn-flat btn-green" id="submitExpand">
                    <span class="fa fa-paper-plane"></span>
                </button>
            </div>
            <div id="problemNavigation">
                {% for another_problem in contest.problems %}
                {% with class = "active" if another_problem.number == problem.number else "" %}
                <button class="btn-flat btn-transparent bd-lightgrey action {{ class }}" number="{{ another_problem.number }}">
                    <span>{{ another_problem.number }}</span>
                </button>
                {% endwith %}
                {% endfor %}
            </div>
            <div id="infoSection">
                <div id="timeRemaining">
                    Time left:<br>
                    <span id="contestTimer" name="timer" format="minutes">
                        {{ contest_request.time_remaining().total_seconds() | round }}
                    </span>
                </div>
                <button class="btn-flat btn-blue" id="viewContestInfo">
                    <span class="fa fa-info"></span>
                </button>
                <button class="btn-flat btn-yellow" id="viewContestMessages">
                    <span class="fa fa-comment-alt"></span>
                </button>
            </div>
        </div>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>

<link rel="stylesheet" href="/static/highlight/xcode.css">
<script src="/static/highlight/highlight.pack.js"></script>
<script src="/static/js/timer.js"></script>
<script src="/static/js/problem.js"></script>
{% endblock %}
